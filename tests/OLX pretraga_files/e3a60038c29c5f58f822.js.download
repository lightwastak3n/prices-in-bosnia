(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{525:function(t,e,n){"use strict";n(16);var r,o,c,l,m,d,v,f,h,y,_,x,j,w,O,k,$=n(6),C=n(3),P=n(10),z=n(14),E=n(2),I=n(12),N=n(11),R=n(7),T=n(1),M=(n(20),n(34),n(17),n(0)),D=n(4),S=n(93);function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(R.a)(t);if(e){var o=Object(R.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(N.a)(this,n)}}var B=(r=Object(M.a)({components:{CustomInfo:S.a}}),o=Object(M.e)(),c=Object(M.e)(),l=Object(M.e)(),m=Object(M.e)(),d=Object(M.e)({type:Boolean,default:!1}),v=Object(M.g)("price"),f=Object(M.g)("duration"),h=Object(M.g)("categoryid"),r((_=function(t){Object(I.a)(o,t);var e,n,r=U(o);function o(){var t;Object(P.a)(this,o);for(var e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return t=r.call.apply(r,[this].concat(n)),Object(C.a)(t,"price",x,Object(E.a)(t)),Object(C.a)(t,"duration",j,Object(E.a)(t)),Object(C.a)(t,"packageId",w,Object(E.a)(t)),Object(C.a)(t,"type",O,Object(E.a)(t)),Object(C.a)(t,"olxExtend",k,Object(E.a)(t)),t.price_amount=0,t.transaction={address:"",city:"",country:"",email:"",fullName:"",phone:"",zip:"",orderInfo:""},t.monri_key="48dd3822b6486405c4fec06125ae8e152f809c9d",t.failedTransaction=!1,t}return Object(z.a)(o,[{key:"handleModeChange",value:function(t,e){this.$emit("price-changed"),this.categoryId=t}},{key:"handlePaymentResult",value:(n=Object($.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("approved"!=e.result.status){t.next=14;break}if(!this.olxExtend){t.next=7;break}return this.$toast.open({message:"Transakcija odobrena. Uspješno ste produžili trajanje OLX shopa",type:"success",duration:5e3}),t.next=5,this.$router.push("/mojolx/postavke/izvodi?from=extend");case 5:t.next=8;break;case 7:this.$toast.open({message:"Transakcija odobrena. Uspješno ste dopunili OLX kredit",type:"success",duration:5e3});case 8:return t.next=10,this.$auth.fetchUser();case 10:this.$emit("success-payment"),this.$emit("handle-close"),t.next=15;break;case 14:this.$toast.open({message:"Transakcija odbijena. Došlo je do greške",type:"error",duration:5e3});case 15:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"validateForm",value:function(){for(var t in this.transaction)if(""===this.transaction[t])return!1;return!0}},{key:"mounted",value:(e=Object($.a)(regeneratorRuntime.mark((function t(){var e,n,r,o,style,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.price_amount=this.price.price,e=Monri(this.monri_key,{locale:"hr"}),"shop"===this.type){t.next=14;break}if(!this.duration||!this.packageId){t.next=9;break}return t.next=6,this.$axios.post("/payment/shop",{duration:this.duration,package_id:this.packageId});case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,this.$axios.post("/credits/buy",{price:this.price_amount,payment_gateway:"monri"});case 11:n=t.sent;case 12:t.next=17;break;case 14:return t.next=16,this.$axios.post("/credits/packages/buy",{price:this.price_amount,payment_gateway:"monri"});case 16:n=t.sent;case 17:r=n.data.transactionParams,this.transaction=r,o=e.components({clientSecret:n.data.client_secret,transactionParams:this.transaction}),style={base:{fontSize:"13px",color:"#002f34",fontWeight:"600",fontFamily:"Geomanist, sans-serif"},invalid:{color:"red"},empty:{fontSize:"12px",color:"grey",background:"red"},complete:{color:"blue"}},(c=o.create("card",{style:style,tokenizePanOffered:!0})).mount("card-element"),l=this,document.getElementById("payment-form").addEventListener("submit",(function(t){t.preventDefault(),e.confirmPayment(c,l.transaction).then((function(t){t.error?(l.validateForm()?l.failedTransaction=!1:l.failedTransaction=!0,l.$snackbar.show({text:t.error.message,timeout:3e3,type:"danger"})):(l.failedTransaction=!1,l.handlePaymentResult(t))}))}));case 26:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),o}(D.default),x=Object(T.a)(_.prototype,"price",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=Object(T.a)(_.prototype,"duration",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=Object(T.a)(_.prototype,"packageId",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=Object(T.a)(_.prototype,"type",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=Object(T.a)(_.prototype,"olxExtend",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(T.a)(_.prototype,"handleModeChange",[v],Object.getOwnPropertyDescriptor(_.prototype,"handleModeChange"),_.prototype),Object(T.a)(_.prototype,"handleModeChange",[f],Object.getOwnPropertyDescriptor(_.prototype,"handleModeChange"),_.prototype),Object(T.a)(_.prototype,"handleModeChange",[h],Object.getOwnPropertyDescriptor(_.prototype,"handleModeChange"),_.prototype),y=_))||y),L=B,F=(n(755),n(9)),component=Object(F.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-row justfiy-between w-full sm:flex-col monri-wrap"},[n("form",{ref:"monri",staticClass:"pr-lg mr-lg border-r border-gray-200 sm:pr-0 sm:mr-0 sm:border-none",attrs:{id:"payment-form",action:"",method:"post"}},[t._m(0),t._v(" "),n("button",[t._v("Uplati OLX kredit")]),t._v(" "),t._m(1)]),t._v(" "),n("div",{staticClass:"flex flex-col w-full sm:mt-xl form-data"},[t.failedTransaction?n("CustomInfo",{staticClass:"mb-md",attrs:{text:"Sva polja su obavezna.",type:"danger"}}):t._e(),t._v(" "),n("span",{staticClass:"text-lg font-semibold pb-lg"},[t._v("Vaši podaci (obavezno popuniti sva polja)")]),t._v(" "),n("div",{staticClass:"flex flex-col w-full"},[t._m(2),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.fullName,expression:"transaction.fullName"}],attrs:{type:"text"},domProps:{value:t.transaction.fullName},on:{input:function(e){e.target.composing||t.$set(t.transaction,"fullName",e.target.value)}}}),t._v(" "),t._m(3),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.phone,expression:"transaction.phone"}],attrs:{type:"number"},domProps:{value:t.transaction.phone},on:{input:function(e){e.target.composing||t.$set(t.transaction,"phone",e.target.value)}}}),t._v(" "),t._m(4),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.email,expression:"transaction.email"}],attrs:{type:"text"},domProps:{value:t.transaction.email},on:{input:function(e){e.target.composing||t.$set(t.transaction,"email",e.target.value)}}}),t._v(" "),t._m(5),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.address,expression:"transaction.address"}],attrs:{type:"text"},domProps:{value:t.transaction.address},on:{input:function(e){e.target.composing||t.$set(t.transaction,"address",e.target.value)}}}),t._v(" "),t._m(6),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.zip,expression:"transaction.zip"}],attrs:{type:"number"},domProps:{value:t.transaction.zip},on:{input:function(e){e.target.composing||t.$set(t.transaction,"zip",e.target.value)}}}),t._v(" "),t._m(7),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.country,expression:"transaction.country"}],attrs:{type:"text"},domProps:{value:t.transaction.country},on:{input:function(e){e.target.composing||t.$set(t.transaction,"country",e.target.value)}}}),t._v(" "),t._m(8),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.city,expression:"transaction.city"}],attrs:{type:"text"},domProps:{value:t.transaction.city},on:{input:function(e){e.target.composing||t.$set(t.transaction,"city",e.target.value)}}}),t._v(" "),t._m(9),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.orderInfo,expression:"transaction.orderInfo"}],staticStyle:{cursor:"not-allowed"},attrs:{disabled:"",type:"text"},domProps:{value:t.transaction.orderInfo},on:{input:function(e){e.target.composing||t.$set(t.transaction,"orderInfo",e.target.value)}}})])],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-row"},[n("label",{staticClass:"pb-lg font-semibold",attrs:{for:"card-element"}},[t._v("Unesite podatke sa kreditne ili debitne kartice.")]),t._v(" "),n("img",{staticClass:"mb-md monri-logo",attrs:{src:"/img/monri_footer.png",alt:""}}),t._v(" "),n("div",{attrs:{id:"card-element"}}),t._v(" "),n("div",{attrs:{id:"card-errors",role:"alert"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"acceptable-cards grid grid-cols-5 gap-4 items-center mt-md"},[n("img",{attrs:{src:"/img/visa-1.gif",alt:""}}),t._v(" "),n("img",{attrs:{src:"/img/mc-1.png",alt:""}}),t._v(" "),n("img",{attrs:{src:"/img/american-1.jpg",alt:""}}),t._v(" "),n("img",{attrs:{src:"/img/discover-1.png",alt:""}}),t._v(" "),n("img",{attrs:{src:"/img/diners-1.gif",alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-wrap"},[n("h2",[t._v("Ime i prezime")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-wrap"},[n("h2",[t._v("Telefon")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-wrap"},[n("h2",[t._v("Email")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-wrap"},[n("h2",[t._v("Adresa")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-wrap"},[n("h2",[t._v("Poštanski broj")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-wrap"},[n("h2",[t._v("Država")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-wrap"},[n("h2",[t._v("Grad")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-wrap"},[n("h2",[t._v("Vrsta uplate")])])}],!1,null,"76e8d10e",null);e.a=component.exports},618:function(t,e,n){t.exports={}},755:function(t,e,n){"use strict";n(618)}}]);